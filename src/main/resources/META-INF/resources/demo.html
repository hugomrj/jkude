<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>KUDE PDF</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        async function enviarXML(event) {
            event.preventDefault();

            const textXML = document.getElementById("xml").value.trim();
            const fileInput = document.getElementById("xmlFile");
            const file = fileInput.files[0];

            let xmlContent = "";

            if (file) {
                xmlContent = await file.text();
            } else if (textXML) {
                xmlContent = textXML;
            } else {
                alert("Debes pegar un XML o seleccionar un archivo.");
                return;
            }

            const response = await fetch("/kude/pdf", {
                method: "POST",
                headers: { "Content-Type": "application/xml" },
                body: xmlContent
            });

            const blob = await response.blob();
            const url = URL.createObjectURL(blob);
            window.open(url, "_blank");
        }
    </script>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">

<div class="bg-white shadow-xl rounded-2xl p-10 w-full max-w-4xl border border-gray-200">

    <h1 class="text-2xl font-semibold text-gray-800 mb-6 text-center">
        Generar KUDE (PDF)
    </h1>

    <form onsubmit="enviarXML(event)" class="space-y-5">

        <label class="block text-gray-700 font-medium">Pegar XML:</label>
        <textarea
                id="xml"
                rows="8"
                class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-400 focus:outline-none font-mono"
                placeholder="Pegá aquí el XML (opcional)..."></textarea>

        <div class="text-center text-gray-600 font-medium">— ó —</div>

        <label class="block text-gray-700 font-medium">Subir archivo XML:</label>
        <input
                id="xmlFile"
                type="file"
                accept=".xml"
                class="w-full border border-gray-300 p-3 rounded-xl bg-gray-50 cursor-pointer"
        />

        <button
                type="submit"
                class="w-full bg-blue-600 hover:bg-blue-700 text-white py-4 rounded-xl font-medium transition shadow-md text-lg"
        >
            Generar PDF
        </button>
    </form>
</div>

</body>
</html>
